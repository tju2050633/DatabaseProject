文件夹中右键/使用Visual Studio打开→双击Garden.sln→运行

### 数据库

- 目前有18张表，后续根据业务扩充

- 在阿里云建立远程数据库，连接字符串：

  ```c#
   public static string connectionString = "Data Source=120.27.148.187:1521/orcl;User Id=C##gd;Password=123456;"
  ```

- `SQL`文件夹中`create.sql`创建表，`sequence.sql`创建序列，`test.sql`插入简单测试数据（目前只有测试登录的数据）

### 后端

采用三层架构

已完成的接口：

- 登录：

  - 路由：/api/Account

  - WebAPI：

    ```c#
    public ActionResult<string> Get(string id, string pwd)
    ```

## 2023.08.01更新

1. 建立了阿里云OSS，用于存储图片等大文件。在.\GardenDAL\Core中添加了OSSHelper.cs，其中有实现按本地图片路径上传图片的函数。

2. 统一status，正确为0，错误为1，2，...。

3. blog部分：
- 获取某用户所有帖子功能。
- 按id删除帖子功能。
- 上传单张本地图片功能，合并在帖子上传功能中。传入参数为本地路径。数据库中相应地为blog表添加image_url列。

1. garden部分：
    将Model中的Garden类名修改为GardenEntity，避免重名。

## 2023.08.12更新

更新了

积分商城的api

- Garden/Controllers/ItemsController.cs 

业务逻辑层

- GardenBLL/Interfaces/IItemsBLL.cs        
- GardenBLL/ItemsBLL.cs

数据访问层

- GardenDAL/AccountDAL.cs （在原有文件中添加了一个返回用户积分的函数）
- GardenDAL/ItemsDAL.cs
- GardenDALRedeemsDAL.cs

模组

- GardenModels/Items.cs
- GardenModels/Redeems.cs

实现对于积分商城的访问，以及点击兑换时的相应处理

接口： 

```c#
// 输入商品id(item_id)
// 返回状态：[商品id、商品名、所需积分、库存、已售数量]
[HttpGet("singleitems")]
public ActionResult<Items> GetSingleItems(string item_id)

// 输入商品兑换记录(redeem _id)、兑换者id(redeemer)、商品id(item_id)
// 返回状态：["兑换成功""兑换失败"]
[HttpPost]
public ActionResult<string> InsertRedeem(string redeem_id, string redeemer, string item_id)

```

## 2023.08.16更新

### Blog部分更新

目前所有接口：

```c#
// 查询
// 输入博客ID(blog_id)
// 返回状态：[博客ID、博主ID、博客标题、正文、博客图片URL、发布时间、评分、评分数]
[HttpGet]
public ActionResult<Blog> GetSingleBlog(string id)
    
// 查询
// 输入博主ID(owner_id)
// 返回状态：[博客ID、博主ID、博客标题、正文、博客图片URL、发布时间、评分、评分数]
[HttpGet("user")]
public IEnumerable<Blog> GetUserBlogs(string id)

// 插入博客
// 输入博主ID(owner_id)、博客标题（title）、正文（content）、本地图片路径（imagePath）
// 返回状态：["上传成功"、"上传失败"]
[HttpPost]
public ActionResult<string> Insert(string owner_id, string title, string content, string imagePath = "")

// 删除博客
// 输入博客ID(blog_id)
// 返回状态：["删除成功"、"删除失败"]
[HttpDelete]
public ActionResult<string> Delete(string id)

// 查询已知博客的评论
// 输入博客ID(blog_id)
// 返回状态：[评论ID、评论者ID、所在博客ID、评论发布时间、评论内容]（评论不止一条，返回一个List）
[HttpGet("Comments")]
public IEnumerable<BlogComments> GetComments(string blog_id)

// 插入评论
// 输入评论ID(blog_comment_id)、评论者ID（owner_id）、所在博客ID（blog_id）、评论内容（content）
// 返回状态：["评论发布成功"、"评论发布失败"]
[HttpPost("Comments")]
public ActionResult<string> Insert_Comments(string blog_comment_id, string owner_id, string blog_id, string content)
```

